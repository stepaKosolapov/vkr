\subsection*{Моделирование мобильности в сетях VANET}

Критически важным аспектом в исследовании симуляции сетей VANET является необходимость в модели мобильности, которая соответствовала бы реальному поведению транспортных средств в дорожном движении~\cite{akhtar2014vehicle}. Симуляторы мобильности в основном используются для генерирования закономерностей движения транспортных средств по определённому маршруту ~\cite{lan2008realistic}. В контексте моделирования мобильности транспортных средств различают макромобильность и микромобильность. При моделировании макромобильности симуляторам необходимо учитывать все макроскопические аспекты, влияющие на дорожное движение: топологию дорог, ограничения движения автомобилей, ограничения скорости, количество полос, правила безопасности и знаки дорожного движения, регулирующие правила проезда на перекрестках.
Микромобильность, с другой стороны, относится к индивидуальному поведению водителей при взаимодействии с другими участниками дорожного движения или с дорожной инфраструктурой: скорость движения в различных дорожных условиях, ускорение, замедление и критерии обгона, поведение на перекрёстках и при наличии дорожных знаков, общее отношение к вождению, связанное с возрастом, полом или настроением водителя. Идеальная симуляция в сетях VANET должна учитывать как описания макро, так и микромобильности. Примеры симуляторов мобильности включают SUMO, VISSIM, SimMobility, PARAMICS и CORSIM. \

В данной работе будет подробнее рассмотрен симулятор мобильности SUMO.

\subsection*{Симулятор городской мобильности SUMO}

SUMO — это пакет программ для моделирования трафика с открытым исходным кодом~\cite{sumo_docs}. SUMO используется для исследования различных аспектов движения - от выбора маршрута и алгоритмов работы светофоров до моделирования взаимодействия транспортных средств. Этот инструментарий применяется в различных проектах для моделирования автоматизированного вождения или стратегий управления трафиком, предлагая функции, такие как движение транспортных средств в непрерывном пространстве и дискретном времени, множественные типы транспортных средств, много-полосное движение с возможностью смены полосы, различные правила приоритета проезда, светофоры, удобный графический интерфейс, быстрое выполнение и взаимодействие с другими приложениями в реальном времени.

\subsection*{Генерация сценария}

Есть много способов создать файл симуляции, но один из самых удобных – это использовать OsmWebWizard~\cite{osmwebwizard}. 

Схема, по которой может осуществляться моделирование мобильности в сетях изображена на рис.~\ref{fig:mobility_scheme}.

\begin{figure}
 \centering
 \includegraphics[
 height=10cm,
 keepaspectratio,
 ]{"mobility_scheme.png"}
 \caption{Схема моделирования мобильности}
 \label{fig:mobility_scheme}
\end{figure}

OsmWebWizard это программа, позволяющая создать файл симуляции SUMO через графический интерфейс. При этом программа предоставляет возможность просимулировать практически любое место на карте мира благодаря использованию OpenStreetMap~\cite{osm} в процессе генерации сценария.

Сама программа OsmWebWizard поставляется вместе с кодом SUMO и доступна после установки SUMO. Она представляет из себя скрипт на языке Python и легко запускается через кроссплатформенный интерпретатор Python.

\begin{figure}
 \centering
 \includegraphics[width=1\linewidth]{"WebWizard_interface.png"}
 \caption{Интерфейс программы OsmWebWizard}
 \label{fig:webwizard_interface}
\end{figure}

Для симуляции сети VANET зачастую не требуется моделировать никакие дороги кроме автомобильных и элементы городской инфраструктуры, поэтому их можно убрать с помощью графического интерфейса OsmWebWizard. 

Так же можно настраивать количество автомобилей, участвующих в симуляции и плотность трафика.

Нажатием на кнопку \textquote{Generate scenario} создаётся файл с настройками симуляции для SUMO в формате .sumocfg

\subsection*{Запуск симуляции в SUMO}

SUMO можно использовать как через графический интерфейс, так и через интерфейс командной строки. В зависимости от необходимого результата, нужно использовать тот или иной вариант. Если требуется визуально понаблюдать за симуляцией, то запускается графический интерфейс, а если есть необходимость только получить результаты симуляции, то удобнее использовать командный интерфейс.

Запуск симуляции может осуществляться с помощью импортирования файла .sumocfg, например, полученного из OsmWebWizard, что является удобным способом быстрого запуска симуляции мобильности.

\begin{figure}
    \centering
    \includegraphics[width=1\linewidth]{"sumo_interface.png"}
    \caption{Интерфейс программы SUMO}
    \label{fig:sumo_interface}
\end{figure}

Результатом запуска симуляции в SUMO является файл с описанием мобильности всех участвующих в симуляции узлов.

\subsection*{Преобразование файла мобильности}

Чтобы использовать результат симуляции SUMO, необходимо преобразовать его в формат, подходящий для NS-2(эта программа будет рассмотрена далее). Для этого можно использовать скрипт написанный на языке Python traceExporter.py, он поставляется так же вместе с SUMO.

Принцип работы этого скрипта прост. Он преобразует все записи о перемещении автомобилей в команды на языке NS-2 otcl, предварительно превращая автомобили в узлы сети. Таким образом, получаемый на выходе файл, по сути является набором команд на языке otcl, отвечающим за создание и перемещение конкретных узлов сети во времени.

После запуска скрипта получается файл mobility.tcl, который можно легко импортировать в NS-2. При импорте все команды, содержащиеся в файле mobility.tcl, выполнятся и события перемещения узлов, описанные в файле, будут зарегистрированы. При старте симуляции в каждый момент вермени будут выполняться все команды, зарегистрированные на этот момент времен и узлы будут перемещаться соответствующим образом, как это происходило в симуляции SUMO.
